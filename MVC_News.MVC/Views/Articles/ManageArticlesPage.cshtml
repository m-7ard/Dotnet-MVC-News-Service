@using MVC_News.MVC.Models.Articles;
@using MVC_News.MVC.Models.Partials;
@model ManageArticlesPageModel;
@{
    ViewData["Title"] = "Manage Articles";
}

<div class="mixin-page-like mixin-page-base mixin-content-grid">
    <header class="flex flex-row gap-4 items-center justify-between" data-track="base" data-role="page-section">
        <div class="token-default-title">
            Articles
        </div>
        <a href="/articles/create" class="mixin-Sbutton-like mixin-Sbutton-sm theme-Sbutton-generic-white token-default-shadow">
            Create Article
        </a>
    </header>
    <hr class="token-x-divider" data-track="base"/>
    <div class="grid max-[445px]:grid-cols-1 grid-cols-2 gap-x-2 gap-y-4 overflow-hidden" data-track="base" data-role="page-section">
        @foreach (var article in Model.Articles)
        {
            <div class="mixin-Scard-like mixin-Scard-base theme-Scard-generic-white token-default-shadow token-default-divide-color divide-y">
                <section data-role="section">
                    <a href="/articles/@article.Id">
                        @await Html.PartialAsync("Reusables/_CoverImage", new CoverImagePartialViewModel(
                            className: "aspect-[16/9] rounded-md overflow-hidden",
                            src: article.HeaderImage
                        ))
                    </a>
                </section>
                <section data-role="section">
                    <a href="/articles/@article.Id">
                        <div class="token-card--header--primary-text line-clamp-2 hover:underline">
                            @article.Title
                        </div>
                    </a>
                    <div class="flex flex-row gap-2 justify-between items-center">
                        <div class="token-card--header--secondary-text">
                            @article.Author.DisplayName
                        </div>
                        <div class="token-card--header--secondary-text">
                            @article.DateCreated.ToLocalTime()
                        </div>
                    </div>
                </section>
                <footer class="flex flex-col gap-2" data-role="section">
                    
                    <a href="/articles/@article.Id/update"
                        class="mixin-Sbutton-like mixin-Sbutton-base theme-Sbutton-generic-green justify-center">
                        Update
                    </a>
                    <a href="/articles/@article.Id/delete"
                        class="mixin-Sbutton-like mixin-Sbutton-base theme-Sbutton-generic-red justify-center">
                        Delete
                    </a>
                </footer>
            </div>
        }
    </div>
</div>